<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Cadastro</title>

  <script src="./js/sessao.js"></script>

  <link rel="stylesheet" href="./css/cadastro.css" />
  <link rel="icon" href="./img/ea logo.png" />
  <link rel="preconnect" href="https://fonts.gstatic.com" />
</head>

<body>
  <!--header inicio-->
  <div class="header">
    <div class="container">
      <img src="../public/img/ea logo.png" alt="">
      <ul class="navbar">
        <li>
          <a href="index.html">Inicial</a>
        </li>
        <li>
          <a href="./dashboard/quiz.html">Quiz</a>
        </li>
        <li>|</li>
        <li>
          <a href="login.html">Login</a>
        </li>
        <li class="agora">
          <a href="#">Cadastro</a>
        </li>
      </ul>
    </div>
  </div>
  <!--header fim-->

  <div class="login">
    <div class="alerta_erro">
      <div class="card_erro" id="cardErro">
        <span id="mensagem_erro"></span>
      </div>
    </div>
    
     
    <p class="titulo">Cadastro</p>
    <div class="containerbody">
      
      <div class="capa">
    
  </div>

  <div class="social">
    <div class="containerbody">
      <div class="boxes">
          <!--
                         Para inserir mais um campo, copie uma das inputs abaixo.
                         Assim que inserir vá para o script abaixo.
                     -->
         
            <p class="p">Nome:</p>
            <input id="nome_input" type="text" />
          
         
            <p class="p">Celular:</p>
            <input id="celular_input" type="text" />
          
         
            <p class="p">E-mail:</p>
            <input id="email_input" type="text"/>
          
         
            <p class="p">Senha:</p>
            <input id="senha_input" type="password" placeholder="******" />
          
         
            <p class="p">Confirmação da Senha:</p>
            <input id="confirmacao_senha_input" type="password" placeholder="******" />
          
          <button class="botao" onclick="cadastrar()">Cadastrar</button>
        
        <div id="div_aguardar" class="loading-div">
          <img src="./assets/circle-loading.gif" id="loading-gif" />
        </div>

        <div id="div_erros_login"></div>
      </div>
    </div>
  </div>

</div>
  <!--footer inicio-->
  <div class="footer">
    <div class="container">
      <img src="../public/img/ea logo.png" alt="">
      <h4>Fabrício Todos os direitos reservados</h4>
    </div>
  </div>
  <!--footer fim-->
</body>

</html>


<script>
  function cadastrar() {
      var nomeVar = document.getElementById("nome_input").value;
      var celularVar = document.getElementById("celular_input").value;
      var emailVar = document.getElementById("email_input").value;
      var senhaVar = document.getElementById("senha_input").value;
      var confirmacaoSenhaVar = document.getElementById("confirmacao_senha_input").value;

      if (
          nomeVar === "" ||
          celularVar === "" ||
          emailVar === "" ||
          senhaVar === "" ||
          confirmacaoSenhaVar === ""
      ) {
          document.getElementById("cardErro").style.display = "block";
          document.getElementById("mensagem_erro").innerHTML =
              "(Mensagem de erro para todos os campos em branco)";
          return false;
      } else {
          setTimeout(() => {
              document.getElementById("cardErro").style.display = "none";
          }, 5000);
      }

      // Substituindo a chamada do fetch pela lógica de validação direta
      var mensagemCelular = "";
      var mensagemEmail = "";
      var mensagemSenha = "";
      var mensagemSenhaConfirmacao = "";
      var cadastroErros = 0;

      // Validações de celular
      if (celularVar.length !== 11) {
          mensagemCelular = "Número de telefone inválido: deve conter 11 caracteres.";
          cadastroErros++;
      }

      // Validações de email
      if (!emailVar.includes("@")) {
          mensagemEmail = "Email inválido: deve conter '@'.";
          cadastroErros++;
      }

      // Validações de senha
      var senhaCaracterEspecial = /[@#$!%]/.test(senhaVar);
      if (!senhaCaracterEspecial) {
          mensagemSenha += "A senha deve conter pelo menos um caractere especial (@, #, $, !, %). ";
          cadastroErros++;
      }

      var senhaNumero = /\d/.test(senhaVar);
      if (!senhaNumero) {
          mensagemSenha += "A senha deve conter pelo menos um número. ";
          cadastroErros++;
      }

      if (senhaVar.length < 8) {
          mensagemSenha += "A senha deve ter pelo menos 8 caracteres. ";
          cadastroErros++;
      }

      var letraMaiuscula = /[A-Z]/.test(senhaVar);
      var letraMinuscula = /[a-z]/.test(senhaVar);
      if (!letraMaiuscula) {
          mensagemSenha += "A senha deve conter pelo menos uma letra maiúscula. ";
          cadastroErros++;
      }
      if (!letraMinuscula) {
          mensagemSenha += "A senha deve conter pelo menos uma letra minúscula. ";
          cadastroErros++;
      }

      if (senhaVar !== confirmacaoSenhaVar) {
          mensagemSenhaConfirmacao = "As senhas não coincidem.";
          cadastroErros++;
      }

      // Exibindo mensagens de erro ou sucesso
      if (cadastroErros > 0) {
          var erros = [];
          if (mensagemCelular) erros.push(mensagemCelular);
          if (mensagemEmail) erros.push(mensagemEmail);
          if (mensagemSenha) erros.push(mensagemSenha);
          if (mensagemSenhaConfirmacao) erros.push(mensagemSenhaConfirmacao);

          document.getElementById("cardErro").style.display = "block";
          document.getElementById("mensagem_erro").innerHTML = erros.join("<br>");
      } else {
          document.getElementById("cardErro").style.display = "block";
          document.getElementById("mensagem_erro").innerHTML =
              "Cadastro realizado com sucesso!";
          setTimeout(() => {
              window.location = "login.html";
          }, 2000);
      }

      return false;
  }
</script>

